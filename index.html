<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SV ToDo</title>
  <!--个别特殊的 js (如 用于调试、跳转到低版本浏览器警告页 之类的)-->
  <link rel="stylesheet" href="styles/index.css">
  <style>
    /*标签*/
  </style>
  <!--一些 js 库,注意依赖顺序-->
  <script>
    //少部分本页面的js
  </script>
</head>

<body>
  <div class="page">
    <h1>SV ToDo 表格</h1>
    <section class="controls">
      <div class="filter-group">

        <div class="filter-block">
          <span class="filter-label">季节：</span>
          <div id="filter-season-group" class="checkbox-group">
            <!-- JS 动态填充复选框，默认全部勾选 -->
          </div>
        </div>

        <div class="filter-block">
          <span class="filter-label">物品类型：</span>
          <div id="filter-category-group" class="checkbox-group">
            <!-- JS 动态填充复选框 -->
          </div>
        </div>

        <div class="filter-block">
          <span class="filter-label">需求类型：</span>
          <div id="filter-need-group" class="checkbox-group">
            <!-- JS 动态填充复选框 -->
          </div>
        </div>

        <div class="filter-block">
          <span class="filter-label">其他：</span>
          <label class="checkbox-item">
            <input type="checkbox" id="toggle-favorite" checked>最爱
          </label>
        </div>

      </div>

      <div class="actions">
        <button id="reset-all-btn">重置全部进度</button>
      </div>

      <div class="tip">
        复选框默认全选，可多选/全不选；需求格子：0/5 → … → 5/5 → 再点回 0。
        行内“重置本行”只清除该行，整行完成时会置底。
      </div>
    </section>

    <!-- 献祭 / 任务 生成系统 -->
    <section class="gen-panels">
      <details id="mixed-donation-details" class="gen-panel">
        <summary>混合献祭（选择后点“确认生效”）</summary>

        <div class="hint">
          默认按<strong>基础献祭</strong>生成“献祭”需求。
          这里用于配置“混合献祭”的替换规则：选择完后点 <strong>确认生效</strong>，会立刻重算献祭需求并自动折叠本模块。<br/>
          （目前未启用 cookie：刷新会清空本模块选择；以后启用 cookie 时，这里的选择应被记住，且“重置全表”不清除这里。）
        </div>

        <div id="mixed-donation-panel" class="panel-body">
          <!-- JS 动态渲染：替换规则列表 -->
        </div>

        <div class="panel-actions">
          <button id="mixed-donation-add-rule">＋ 添加替换规则</button>
          <button id="mixed-donation-apply" class="primary">确认生效</button>
        </div>
      </details>
      <details class="gen-panel">
        <summary>任务（勾选后自动生成“任务”需求）</summary>
        <div class="panel-actions">
          <button id="quest-select-none">全不选</button>
          <button id="quest-select-all">全选</button>
        </div>
        <div id="quest-panel" class="panel-body">
          <!-- JS 动态渲染：大类 + 任务 checkbox -->
        </div>
      </details>
    </section>

    <!-- 单例 tooltip（长按/点小三角都会用它） -->
    <div id="tooltip" class="tooltip hidden"></div>

    <section class="table-wrapper">
      <table id="items-table">
        <thead>
          <tr id="table-header-row"><!-- 表头由 JS 动态生成：物品 / 季节 / 类型 / 各需求类型 / 总需求 --></tr>
        </thead>
        <tbody id="items-tbody"><!-- 数据由 JS 渲染 --></tbody>
      </table>
    </section>

    <section class="hidden-items">
      <button id="toggle-hidden-btn" class="toggle-hidden-btn">＋ 显示隐藏物品</button>

      <div id="hidden-items-wrap" style="display:none;">
        <div class="hint">这些物品带有标记，默认隐藏。</br>不卖的物品是常用资源不建议出售;</br>不留的物品来源综合不用特意储备;</br>无季节物品经过前期准备后可稳定产出，不再需要每季节确认。</div>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr id="hidden-table-header-row"></tr>
            </thead>
            <tbody id="hidden-items-tbody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="notes-panel">
      <h2>备注</h2>
      <div id="global-notes" class="notes-container">
        <div id="global-notes-list" class="notes-list">
          <!-- JS 渲染全局备注 -->
        </div>
        <div class="note-add-box">
          <input
            id="global-note-input"
            type="text"
            placeholder="添加备注，例如：葡萄干需求=葡萄多 5 个"
          >
          <button id="global-note-add-btn">添加</button>
        </div>
      </div>
    </section>
  </div>

  <script src="scripts/data.js" defer></script>
  <script src="scripts/index.js" defer></script>
  <script>
    //大部分本页面的 js
  </script>
</body>

</html>